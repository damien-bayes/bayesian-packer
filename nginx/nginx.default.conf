# Default Nginx Configuration
#
# Project: Baythium Packer
# File: /nginx/nginx.default.conf
# Initial author: Damien Bayes <damien.bayes.db@gmail.com>

server {
  listen 80;
  server_name packer.bayesianflow.space;
  return 301 https://packer.baythium.com$request_uri;
}

server {
  listen 80;
  server_name packer.baythium.com localhost;

  # charset koi8-r;
  # access_log /var/log/nginx/log/host.access.log main;

  location / {
    root /usr/share/nginx/html;
    index index.html index.htm;
  }

  include /etc/nginx/custom-errors.conf;

  # Deny access to .htaccess files
  location ~ /\.ht {
    deny  all;
  }

  # Allow visitors to cache static files 
  location ~* .(?:jpg|jpeg|gif|bmp|ico|png|css|js|swf)$ { 
    expires 7d; 
    access_log off; 
  }

  location /api { 
    error_page 403 /exceptions/403/index.html; 
    allow 10.10.0.0/16; 
    deny all; 
  } 

  location = /exceptions/403/index.html { 
    allow all; 
  } 
}
